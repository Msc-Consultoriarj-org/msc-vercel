# Deploy Manus - Ambiente de Desenvolvimento e Prototipagem

Este guia documenta o processo de deploy e uso do **MSC Consultoria** no ambiente Manus para desenvolvimento, testes e prototipagem de novas features.

---

## üéØ Prop√≥sito do Ambiente Manus

O ambiente Manus √© utilizado para:

- **Prototipagem r√°pida** de novas funcionalidades
- **Testes** de features antes de ir para produ√ß√£o
- **Desenvolvimento iterativo** com feedback imediato
- **Valida√ß√£o** de conceitos e UX com a equipe
- **Ambiente seguro** para experimenta√ß√£o sem afetar produ√ß√£o

---

## üöÄ Deploy Autom√°tico

O projeto j√° est√° configurado e conectado ao GitHub. O deploy no Manus acontece automaticamente:

### URL de Produ√ß√£o (Manus)
```
https://msc.manus.space
```

### Processo de Deploy

1. **Commit e Push** para o reposit√≥rio GitHub:
   ```bash
   git add .
   git commit -m "feat: nova funcionalidade"
   git push origin main
   ```

2. **Sincroniza√ß√£o Autom√°tica**: O Manus detecta as mudan√ßas e sincroniza automaticamente

3. **Checkpoint**: Crie um checkpoint no Manus para salvar o estado:
   - Acesse o painel do Manus
   - Clique em "Save Checkpoint"
   - Adicione uma descri√ß√£o das mudan√ßas

4. **Publish**: Clique no bot√£o "Publish" no header do Management UI para publicar a vers√£o

---

## üóÑÔ∏è Banco de Dados

### Ambiente de Desenvolvimento

O Manus utiliza **MySQL/TiDB** gerenciado automaticamente pela plataforma.

#### Acesso ao Banco

1. Acesse o **Management UI** ‚Üí **Database**
2. Interface CRUD completa dispon√≠vel
3. Connection info no canto inferior esquerdo (lembre de habilitar SSL)

#### Vari√°veis de Ambiente (Auto-injetadas)

O Manus injeta automaticamente as seguintes vari√°veis:

```env
DATABASE_URL=mysql://...
JWT_SECRET=...
OAUTH_SERVER_URL=https://api.manus.im
VITE_APP_ID=...
VITE_OAUTH_PORTAL_URL=...
OWNER_OPEN_ID=...
OWNER_NAME=...
BUILT_IN_FORGE_API_URL=...
BUILT_IN_FORGE_API_KEY=...
VITE_FRONTEND_FORGE_API_KEY=...
VITE_FRONTEND_FORGE_API_URL=...
VITE_APP_TITLE=MSC Consultoria
VITE_APP_LOGO=/msc_logo_concept_04.png
```

**N√£o √© necess√°rio configurar manualmente** - tudo funciona out-of-the-box.

---

## üîÑ Workflow de Desenvolvimento

### 1. Desenvolver Localmente (Opcional)

```bash
# Clone o reposit√≥rio
git clone https://github.com/Msc-Consultoriarj-org/msc-consultoria.git
cd msc-consultoria

# Instale depend√™ncias
pnpm install

# Configure .env local (copie do Manus Settings ‚Üí Secrets)
cp .env.example .env

# Rode o servidor de desenvolvimento
pnpm dev
```

### 2. Desenvolver no Manus (Recomendado)

- Fa√ßa altera√ß√µes diretamente no chat do Manus
- Visualize mudan√ßas em tempo real no Preview
- Teste funcionalidades imediatamente
- Salve checkpoints frequentemente

### 3. Testar Features

1. Acesse https://msc.manus.space
2. Fa√ßa login com sua conta Manus
3. Teste a funcionalidade implementada
4. Colete feedback da equipe
5. Itere rapidamente se necess√°rio

### 4. Migrar para Produ√ß√£o

Quando a feature estiver madura e validada:

1. Certifique-se de que todos os testes passaram
2. Crie um checkpoint final no Manus
3. Documente as mudan√ßas
4. Siga o guia **Deploy-Vercel.MD** para publicar em produ√ß√£o

---

## üõ†Ô∏è Migra√ß√µes de Banco de Dados

### Criar Nova Migra√ß√£o

1. Edite `drizzle/schema.ts` com as mudan√ßas necess√°rias

2. Execute o comando de migra√ß√£o:
   ```bash
   pnpm db:push
   ```

3. O comando acima:
   - Gera a migra√ß√£o com `drizzle-kit generate`
   - Aplica no banco com `drizzle-kit migrate`

### Exemplo: Adicionar Nova Tabela

```typescript
// drizzle/schema.ts
export const newTable = mysqlTable("new_table", {
  id: int("id").autoincrement().primaryKey(),
  name: varchar("name", { length: 200 }).notNull(),
  createdAt: timestamp("createdAt").defaultNow().notNull(),
});
```

Depois execute:
```bash
pnpm db:push
```

---

## üì± PWA e Mobile

### Testar PWA

1. Acesse https://msc.manus.space no celular
2. No Chrome/Safari, clique em "Adicionar √† tela inicial"
3. O app ser√° instalado como PWA nativo

### Gerar APK Android (Interno)

Para distribui√ß√£o interna da equipe MSC:

1. Acesse [PWABuilder](https://www.pwabuilder.com/)
2. Cole a URL: `https://msc.manus.space`
3. Clique em "Start" e aguarde a an√°lise
4. Clique em "Package for Stores" ‚Üí "Android"
5. Configure:
   - **Package ID**: `com.mscconsultoria.app`
   - **App Name**: MSC Consultoria
   - **Signing Key**: Gere uma nova ou use existente
6. Download o APK
7. Distribua para a equipe via Google Drive ou link direto

**Nota**: Este APK √© apenas para uso interno, n√£o requer publica√ß√£o na Play Store.

---

## üîê Autentica√ß√£o

O Manus utiliza **Manus OAuth** integrado:

- Login autom√°tico com conta Manus
- Controle de acesso por roles (admin/user)
- Sess√£o persistente entre dispositivos

### Gerenciar Permiss√µes

Para promover um usu√°rio a admin:

1. Acesse **Management UI** ‚Üí **Database**
2. Abra a tabela `users`
3. Encontre o usu√°rio
4. Altere o campo `role` para `admin`

---

## üìä Monitoramento

### Analytics

O Manus fornece analytics integrado:

- Acesse **Management UI** ‚Üí **Dashboard**
- Visualize UV (Unique Visitors) e PV (Page Views)
- Acompanhe uso em tempo real

### Logs

Para visualizar logs do servidor:

1. Acesse o painel do Manus
2. V√° em **Management UI** ‚Üí **Code**
3. Abra o terminal integrado
4. Logs aparecem automaticamente durante desenvolvimento

---

## üîÑ Sincroniza√ß√£o com GitHub

### Status Atual

- **Reposit√≥rio**: https://github.com/Msc-Consultoriarj-org/msc-consultoria-manus
- **Branch**: main
- **Sincroniza√ß√£o**: Bidirecional autom√°tica

### Fazer Mudan√ßas Externas

Se voc√™ editar o c√≥digo fora do Manus:

```bash
# Fa√ßa suas mudan√ßas
git add .
git commit -m "feat: nova feature"
git push origin main
```

No Manus:
1. V√° em **Management UI** ‚Üí **Settings** ‚Üí **GitHub**
2. Clique em "Sync" para puxar as mudan√ßas
3. Ou simplesmente crie um novo checkpoint (sync autom√°tico)

---

## üé® Customiza√ß√£o

### Alterar Logo e T√≠tulo

1. Acesse **Management UI** ‚Üí **Settings** ‚Üí **General**
2. Modifique:
   - **Website Name**: Nome exibido
   - **Favicon**: Upload novo √≠cone

Ou via vari√°veis de ambiente (Settings ‚Üí Secrets):
```env
VITE_APP_TITLE=Novo T√≠tulo
VITE_APP_LOGO=/caminho/para/logo.png
```

### Dom√≠nio Customizado

1. Acesse **Management UI** ‚Üí **Settings** ‚Üí **Domains**
2. Op√ß√µes:
   - Modificar prefixo: `seu-prefixo.manus.space`
   - Comprar dom√≠nio: Compre diretamente no Manus
   - Vincular dom√≠nio existente: Configure DNS

---

## üêõ Troubleshooting

### Servidor n√£o est√° respondendo

1. Acesse **Management UI** ‚Üí **Dashboard**
2. Verifique o status do servidor
3. Se necess√°rio, reinicie via interface

### Erro de banco de dados

1. Verifique se as migra√ß√µes foram aplicadas: `pnpm db:push`
2. Acesse o Database UI e verifique as tabelas
3. Confira os logs para mensagens de erro

### Mudan√ßas n√£o aparecem

1. Limpe o cache do navegador (Ctrl+Shift+R)
2. Verifique se o checkpoint foi salvo
3. Confirme que clicou em "Publish"

---

## üìö Recursos Adicionais

- **Documenta√ß√£o Manus**: https://docs.manus.im
- **Suporte**: https://help.manus.im
- **GitHub Issues**: https://github.com/Msc-Consultoriarj-org/msc-consultoria-manus/issues

---

## ‚úÖ Checklist de Deploy

Antes de considerar uma feature pronta para produ√ß√£o:

- [ ] Feature implementada e funcionando no Manus
- [ ] Testes manuais realizados
- [ ] Feedback da equipe coletado
- [ ] Sem erros no console do navegador
- [ ] Sem erros nos logs do servidor
- [ ] Responsividade testada (desktop + mobile)
- [ ] PWA testado em dispositivo real
- [ ] Checkpoint criado com descri√ß√£o clara
- [ ] Documenta√ß√£o atualizada (se necess√°rio)
- [ ] Pronto para migrar para Vercel/Supabase (produ√ß√£o)

---

**Ambiente**: Desenvolvimento e Prototipagem  
**Stack**: React 19 + tRPC + MySQL/TiDB + Manus OAuth  
**URL**: https://msc.manus.space  
**Pr√≥ximo passo**: Quando maduro, migrar para produ√ß√£o seguindo **Deploy-Vercel.MD**
